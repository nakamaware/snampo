[tools]
flutter = "3.32.0"
java = "17"

# Frontend Tasks
[tasks."frontend:setup"]
description = "フロントエンドの依存関係をインストール（VS Codeではpubspec.yaml保存時に自動実行されます）"
run = "cd frontend && flutter pub get"

[tasks."frontend:dev"]
description = "フロントエンドアプリを起動（VS Codeのデバッグ実行でも可能）"
run = "cd frontend && flutter run"

# Backend Tasks
[tasks."backend:setup"]
description = "バックエンドの依存関係をインストール"
run = "cd backend && uv sync"

[tasks."backend:dev"]
description = "バックエンド開発サーバーを起動"
run = "cd backend && uv run uvicorn app.main:app --reload --host 0.0.0.0 --port 8000"

# Combined Tasks
[tasks.dev]
description = "フロントエンドとバックエンドを同時に起動"
run = [
    { tasks = ["frontend:dev", "backend:dev"] },
]

[tasks.setup]
description = "プロジェクトの初期セットアップ（依存関係のインストールとpre-commitのセットアップ）"
run = [
    { tasks = ["frontend:setup", "backend:setup"] },
    "uv tool install pre-commit || pip install pre-commit || echo 'pre-commitのインストールに失敗しました。手動でインストールしてください: pip install pre-commit'",
    "pre-commit install || echo 'pre-commit installに失敗しました。pre-commitがインストールされているか確認してください。'",
]
